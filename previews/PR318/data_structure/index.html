<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data Structure · NetworkDynamics</title><meta name="title" content="Data Structure · NetworkDynamics"/><meta property="og:title" content="Data Structure · NetworkDynamics"/><meta property="twitter:title" content="Data Structure · NetworkDynamics"/><meta name="description" content="Documentation for NetworkDynamics."/><meta property="og:description" content="Documentation for NetworkDynamics."/><meta property="twitter:description" content="Documentation for NetworkDynamics."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NetworkDynamics</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">General</a></li><li><a class="tocitem" href="../mathematical_model/">Mathematical Model</a></li><li><a class="tocitem" href="../network_construction/">Network Construction</a></li><li class="is-active"><a class="tocitem" href>Data Structure</a><ul class="internal"><li><a class="tocitem" href="#Flat-Parameter-and-State-Arrays"><span>Flat Parameter and State Arrays</span></a></li><li><a class="tocitem" href="#Accessing-Components"><span>Accessing Components</span></a></li><li><a class="tocitem" href="#Extracting-a-Network-object-from-Containers"><span>Extracting a <code>Network</code>-object from Containers</span></a></li></ul></li><li><span class="tocitem">Features</span><ul><li><a class="tocitem" href="../symbolic_indexing/">Symbolic Indexing</a></li><li><a class="tocitem" href="../metadata/">Metadata</a></li><li><a class="tocitem" href="../initialization/">Initialization</a></li><li><a class="tocitem" href="../callbacks/">Callbacks and Events</a></li><li><a class="tocitem" href="../mtk_integration/">ModelingToolkit Integration</a></li><li><a class="tocitem" href="../sparsity_detection/">Sparsity Detection</a></li><li><a class="tocitem" href="../external_inputs/">External Inputs</a></li><li><a class="tocitem" href="../inspector/">Interactive Solution Inspection</a></li></ul></li><li><a class="tocitem" href="../API/">API</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../generated/getting_started_with_network_dynamics/">Getting Started</a></li><li><a class="tocitem" href="../generated/heterogeneous_system/">Heterogeneous Systems</a></li><li><a class="tocitem" href="../generated/init_tutorial/">Initialization</a></li><li><a class="tocitem" href="../generated/cascading_failure/">Cascading Failure</a></li><li><a class="tocitem" href="../generated/gas_network/">Gas Network</a></li><li><a class="tocitem" href="../generated/stress_on_truss/">Stress on Truss</a></li><li><a class="tocitem" href="../generated/directed_and_weighted_graphs/">Directed and Weighted Graphs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Data Structure</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data Structure</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/NetworkDynamics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/NetworkDynamics.jl/blob/main/docs/src/data_structure.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-Structure"><a class="docs-heading-anchor" href="#Data-Structure">Data Structure</a><a id="Data-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Structure" title="Permalink"></a></h1><p>A <a href="../API/#NetworkDynamics.Network"><code>Network</code></a> contains a list of vertex and edge models along with a graph. However, in tight numerical loops, it will never access these lists of models directly. Instead, the network maintains an internal representation that tracks all symbolic indices, defining the precise ordering of states and parameters in a flat array representation. To optimize performance, especially for heterogeneous networks, the network employs specialized data structures that batch identical models together.</p><p>This disconnect between the explicit lists and the internal data structures can be confusing.</p><h2 id="Flat-Parameter-and-State-Arrays"><a class="docs-heading-anchor" href="#Flat-Parameter-and-State-Arrays">Flat Parameter and State Arrays</a><a id="Flat-Parameter-and-State-Arrays-1"></a><a class="docs-heading-anchor-permalink" href="#Flat-Parameter-and-State-Arrays" title="Permalink"></a></h2><p>The vertex and edge models may contain metadata, such as the initial values for states and parameters. Crucially, this metadata is <strong>only</strong> for the building and initialization of the simulation. During actual simulation, the state and parameters are handled as <strong>flat arrays</strong>, i.e., plain <code>Vector{Float64}</code> objects.</p><p><a href="../API/#NetworkDynamics.NWState"><code>NWState</code></a> and <a href="../API/#NetworkDynamics.NWParameter"><code>NWParameter</code></a> serve as wrappers around flat arrays and the <a href="../API/#NetworkDynamics.Network"><code>Network</code></a> objects, allowing you to inspect and modify those flat arrays by addressing vertices and edges directly.</p><p>A typical workflow is the following:</p><ol><li>Set default values in the models using the metadata (see <a href="../metadata/#Metadata">Metadata</a>).</li><li>Create a network (see <a href="../network_construction/#Network-Construction">Network Construction</a>).</li><li>Generate a state <code>s = NWState(nw)</code> which will be prefilled with the default values from the component metadata (see <a href="../symbolic_indexing/#Symbolic-Indexing">Symbolic Indexing</a>).</li><li>Change the values of <code>s</code>, i.e., <code>s.v[1,:x] = 1.0</code>: This changes the <strong>underlying flat array</strong> but not the metadata of the models.</li><li>Build a problem with the updated flat arrays using <code>uflat(s)</code> and <code>pflat(s)</code>.</li></ol><h2 id="Accessing-Components"><a class="docs-heading-anchor" href="#Accessing-Components">Accessing Components</a><a id="Accessing-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-Components" title="Permalink"></a></h2><p>Per default, the models are not copied on Network construction:</p><pre><code class="language-julia hljs">v1 = VertexModel(f=kuramoto_first, sym=[:θ], psym=[:ω], g=1)
v2 = VertexModel(f=kuramoto_secnd, sym=[:δ, :ω], psym=[:M, :D, :Pm], g=1)
e = EdgeModel(;g=AntiSymmetric(kuramoto_edge), outsym=[:P], psym=[:K])
nw = Network(complete_graph(2), [v1, v2], e)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Network with 3 states and 5 parameters
 ├─ 2 vertices (2 unique types)
 └─ 1 edges (1 unique type)
Edge-Aggregation using SequentialAggregator(+)</code></pre><p>You can access the models using <code>getindex</code>/<code>[]</code> with <code>VIndex</code> or <code>EIndex</code>:</p><pre><code class="language-julia hljs">v1 === nw[VIndex(1)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>This can be important when changing the metadata of components. i.e., both lines below are equivalent:</p><pre><code class="language-julia hljs">set_position!(v1, (1,0))
set_position!(nw[VIndex(1)], (1,0))</code></pre><div class="admonition is-info" id="Aliasing-of-component-models-bcb478e7d8fe9831"><header class="admonition-header">Aliasing of component models<a class="admonition-anchor" href="#Aliasing-of-component-models-bcb478e7d8fe9831" title="Permalink"></a></header><div class="admonition-body"><p>Since components are not copied, multiple entries in the vertex and edge lists might point to the same instance of a model. </p><pre><code class="language-julia hljs">nw = Network(complete_graph(3), [v1,v2,v1], e)
v1 === nw[VIndex(1)] === nw[VIndex(3)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>Consequently, metadata set for one model might affect another model. This behavior can be beneficial for performance reasons. To force the copying of components, use the <code>dealias</code> keyword:</p><pre><code class="language-julia hljs">nw = Network(complete_graph(3), [v1,v2,v1], e; dealias=true)
nw[VIndex(1)] === nw[VIndex(3)] # neither of them === v1</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre></div></div><h2 id="Extracting-a-Network-object-from-Containers"><a class="docs-heading-anchor" href="#Extracting-a-Network-object-from-Containers">Extracting a <code>Network</code>-object from Containers</a><a id="Extracting-a-Network-object-from-Containers-1"></a><a class="docs-heading-anchor-permalink" href="#Extracting-a-Network-object-from-Containers" title="Permalink"></a></h2><p><code>NetworkDynamics.jl</code> provides a <a href="../API/#NetworkDynamics.extract_nw"><code>extract_nw</code></a> function, to get a reference to the wrapped <code>Network</code> object from different containers, such as solution objects or <a href="https://docs.sciml.ai/DiffEqDocs/stable/basics/integrator">integrator objects</a>. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../network_construction/">« Network Construction</a><a class="docs-footer-nextpage" href="../symbolic_indexing/">Symbolic Indexing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 27 September 2025 02:04">Saturday 27 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
